<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <script src="../../script/api.js"></script>
</head>

<body onclick="popClose()" style="background-color:rgba(0, 0, 0, 0.3)">

</body>
<script>
    function popClose(time) {
        time = time || 0;
        setTimeout(function() {
            api.execScript({
                script: 'window.pop="";'
            });
            api.closeFrame();
        }, time);
    }

    function popUp(callback) {
        if (typeof appInfo.index_pop_up_img == 'undefined') {
            appInfo.index_pop_up_img = '';
        }
        if (typeof appInfo.index_pop_up_code == 'undefined') {
            appInfo.index_pop_up_code = '';
        }
        if (appInfo.index_pop_up_img != '') {
            var img = new Image();
            img.src = appInfo.index_pop_up_img;
            img.onload = function() {
                if (appInfo.index_pop_up_code != '') {
                    $(img).on('click', function(event) {
                        ddevent.fun(appInfo.index_pop_up_code);
                        $('#pop_up,#pop_up_close').remove();
                        callback();
                        event.stopPropagation();
                    });
                }
                var div = document.createElement("div");
                $(div).on('click', function(event) {
                    $('#pop_up,#pop_up_close').remove();
                    popClose();
                    event.stopPropagation();
                });
                div.id = 'pop_up';
                $(div).css({
                    'width': '100%',
                    'position': 'fixed',
                    'top': 0,
                    'left': 0,
                    'z-index': '999',
                    'display': '-webkit-flex',
                    'display': 'flex',
                    'justify-content': 'center',
                    '-webkit-justify-content': 'center',
                    '-webkit-align-items': 'center',
                    'align-items': 'center',
                    'height': '100%'
                });
                $(img).css({
                    'width': '80%',
                    'display': 'block'
                });
                var cha = '<div></div>';
                var span = document.createElement("span");
                span.id = 'pop_up_close';
                $(span).html('+');
                $(span).css({
                    'display': 'inline-block',
                    'font-size': '48px',
                    'transform': 'rotate(45deg)',
                    '-webkit-transform': 'rotate(45deg)',
                    'position': 'fixed',
                    'right': '16px',
                    'top': '48px',
                    'color': '#ffffff;',
                    'z-index': 99999
                });
                $(span).on('click', function(event) {
                    $('#pop_up,#pop_up_close').remove();
                    callback();
                    event.stopPropagation();
                });
                $(div).html(img);
                $('body').append(span);
                $('body').append(div);
                img.onload = null;
            }
        } else {
            callback();
        }
    }

    ready(function() {
        popUp(function() {
            popClose(100);
        });
    }, 1);
</script>

</html>
