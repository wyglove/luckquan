<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <script src="../../script/api.js"></script>
    <style>
    </style>
</head>
<body class="um-vp" style="height:100%">
</body>
<script>

// var dialogBox = api.require('dialogBox');
// dialogBox.alert({
//     texts: {
//         title: '新消息提醒',
//         content: re.msg_content,
//         leftBtnTitle: '稍后再看',
//         rightBtnTitle: '马上查看'
//     },
//     styles: {
//         bg: '#fff',
//         w: 300,
//         corner:2,
//         title: {
//             marginT: 5,
//             titleSize: 14,
//             titleColor: '#000'
//         },
//         content: {
//             marginT:0,
//             marginB:20,
//             color: '#000',
//             size: 14
//         },
//         left: {
//             marginB: 7,
//             marginL: 10,
//             w: 130,
//             h: 35,
//             corner: 10,
//             bg: '#cdcdcd',
//             color:'#FFFFFF',
//             size: 12
//         },
//         right: {
//             marginB: 7,
//             marginL: 20,
//             w: 130,
//             h: 35,
//             corner: 10,
//             bg: '#c087c0',
//             color:'#FFFFFF',
//             size: 12
//         }
//     }
// }, function(ret) {
//     if (ret.eventType == 'right') {
//         openPage('user','msg');
//     }
//     var dialogBox = api.require('dialogBox');
//     dialogBox.close({
//         dialogName: 'alert'
//     });
// });

    function popClose(time){
        time=time||0;
        setTimeout(function(){
            api.execScript({
                script: 'window.pop="";'
            });
            setGlobalData('dialogPop',0);
            api.closeFrame();
        },time);
    }
    var confirm2={
        'tpl':function(){/*<div id="confirmBg" style="z-index:9999999;height: 100%; width: 100%; background:rgba(51,51,51,0.5); position: fixed; top: 0; left: 0">
        <div id="confirmMain" style="position:fixed;padding:0.5em 0 0 0;width: 70%;  box-sizing: border-box; background: #ffffff; margin: auto; visibility:hidden; border-radius:0.4em">
            <div style="text-align:center"><img src="<%this.logo%>" style="border-radius:50%; width:3.5em; border:0.2em #FFF solid;margin-top: -2.5em;" /><p style="font-size:1.1em; color:#F60"><%this.title%></p></div>
            <div style="padding:0 0.6em;text-align: center; margin-top: 0.5em; line-height: 1.5;">
            <div style="display:flex;padding-top: 0.5em;">
    		<%if(this.img!=''){%>
            <div style="flex:1"><img src="<%this.img%>" style="display:block; width:100%" /></div>
            <%}%>
    		<dif style="flex:2; font-size:0.9em; text-align:<%if(this.img==''){%>left<%}else{%>left<%}%>; padding-left:0.5em;"><%this.content%></div>
            </div>
            <div style="display: flex; margin-top: 1em; text-align: center; border-top:0.02em #efeaea solid; height:3.5em; line-height:3.5em">
                <div style="flex:1;" onclick="confirm2.callback(0)"><%this.btn[0]%></div>
    			<%if(typeof this.btn[1]!='undefined'){%>
                <div style="flex:1; background:#F60; color:#FFF;border-bottom-right-radius:0.4em" onclick="confirm2.callback(1)"><%this.btn[1]%></div>
    			<%}%>
            </div>
        </div>*/;},
        'set':function(title,content,logo,img,btn,callback){
    		if(this.status()==1){
    			return false;
    		}
            var data={
                title:title,
                content:content,
    			logo:logo,
    			img:img,
                btn:btn
            };
            this.callback=callback;
            var tpl=this.tpl.toString();
            tpl=tpl.replace(/function\s?\(\){\/\*/,'').replace(/\*\/;}$/,'');
            var html=barretTpl(tpl,data);
            $('body').html(html);
            var $confirmMain=$('#confirmMain');
            $confirmMain.css({'visibility':'','top':'50%','left':'50%','-webkit-transform':'translate(-50%, -50%)'});
            var _this=this;
            $("#confirmBg").click(function(event){
                if($(event.target).attr('id')=='confirmBg'){
                    _this.close();
                }
            });
        },
        'callback':function(data){
        },
        'close':function(){
            $('#confirmBg').remove();
            popClose(100);
        },
    	'status':function(){
    		return $('#confirmBg').length;
    	}
    };

    function start(){
        var title=api.pageParam.title;
        var content=api.pageParam.content;
        var logo=api.pageParam.logo;
        var img=api.pageParam.img;
        var leftBtn=api.pageParam.leftBtn;
        var rightBtn=api.pageParam.rightBtn;
        var leftClick=api.pageParam.leftClick;
        var rightClick=api.pageParam.rightClick;
        confirm2.set(title,content,logo,img,[leftBtn,rightBtn],function(_data){
    		if(_data==0){
                if(leftClick){
                    var fn = new Function(leftClick);
                    fn();
                }
    		}else{
                if(rightClick){
                    var fn = new Function(rightClick);
                    fn();
                }
    		}
    		confirm2.close();
    	});
    }

    ready(function(){
        start();
    },1);
</script>
</html>
